{"version":3,"file":"../pages/api/request.js","mappings":"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","sources":["webpack://@mintlify/client/external commonjs \"@sentry/nextjs\"","webpack://@mintlify/client/external commonjs \"next/dist/compiled/next-server/pages-api.runtime.prod.js\"","webpack://@mintlify/client/external module \"axios\"","webpack://@mintlify/client/src/pages/api/request.ts","webpack://@mintlify/client/sentry-wrapper-module","webpack://@mintlify/client/../../node_modules/next/dist/build/templates/helpers.js?4d71","webpack://@mintlify/client/?b94c","webpack://@mintlify/client/external commonjs2 \"net\"","webpack://@mintlify/client/./src/utils/api/isSafeRequestUrl.ts","webpack://@mintlify/client/../../node_modules/next/dist/server/future/route-kind.js?9654","webpack://@mintlify/client/../../node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js"],"sourcesContent":["module.exports = require(\"@sentry/nextjs\");","module.exports = require(\"next/dist/compiled/next-server/pages-api.runtime.prod.js\");","module.exports = import(\"axios\");;","import { ApiPlaygroundResultType } from '@mintlify/models';\nimport axios, { isAxiosError } from 'axios';\nimport { NextApiRequest, NextApiResponse } from 'next';\n\nimport { RequestInfo } from '@/hooks/useSendPlaygroundRequest';\nimport { isSafeRequestUrl } from '@/utils/api/isSafeRequestUrl';\n\nasync function handler(req: NextApiRequest, res: NextApiResponse<ApiPlaygroundResultType>) {\n  const { method, url, header, query, body, cookie: _cookie } = req.body as RequestInfo;\n  if (!isSafeRequestUrl(url)) {\n    return res.send({\n      error: true,\n      errorMessage: 'invalid URL',\n    });\n  }\n\n  try {\n    const data = header['content-type'] === 'multipart/form-data' ? toFormData(body) : body;\n\n    const response = await axios({\n      url,\n      method,\n      params: query,\n      data,\n      headers: header as Record<string, string>,\n      // prevent axios from adding [] after array query params\n      paramsSerializer: {\n        indexes: null,\n      },\n      // prevent axios from using default utf-8 encoding\n      responseEncoding: 'base64',\n      // prevent axios from erroring on bad status codes\n      validateStatus: () => true,\n      // prevent axios from parsing json, losing whitespace information\n      transformResponse: (data) => data,\n    });\n\n    return res.send({\n      error: false,\n      response: {\n        status: response.status,\n        statusText: response.statusText,\n        headers: response.headers,\n        data: response.data,\n      },\n    });\n  } catch (error) {\n    console.error(error);\n    /**\n     * handle errors based on the axios error handling guide\n     * (don't need to handle the `if error.response` case, since we allow all statuses)\n     *\n     * https://github.com/axios/axios#handling-errors\n     */\n    const errorMessage = isAxiosError(error)\n      ? error.request\n        ? 'no response received'\n        : 'unable to create request'\n      : 'an unknown error occurred';\n    return res.send({\n      error: true,\n      errorMessage,\n    });\n  }\n}\n\nconst toFormData = (body: unknown) => {\n  const form = new FormData();\n  if (body == undefined) {\n    return form;\n  }\n\n  if (typeof body !== 'object') {\n    throw TypeError('body with content-type multipart/form-data must be an object');\n  }\n\n  Object.entries(body)\n    .filter(([_, value]) => value != undefined)\n    .forEach(([key, value]) => form.append(key, value));\n\n  return form;\n};\n\nexport default handler;\n","import * as Sentry from '@sentry/nextjs';\nimport * as serverComponentModule from '__SENTRY_WRAPPING_TARGET_FILE__.cjs';\nexport * from '__SENTRY_WRAPPING_TARGET_FILE__.cjs';\n\n/*\n * This file is a template for the code which will be substituted when our webpack loader handles API files in the\n * `pages/` directory.\n *\n * We use `__SENTRY_WRAPPING_TARGET_FILE__.cjs` as a placeholder for the path to the file being wrapped. Because it's not a real package,\n * this causes both TS and ESLint to complain, hence the pragma comments below.\n */\n\n\nconst userApiModule = serverComponentModule ;\n\n// Default to undefined. It's possible for Next.js users to not define any exports/handlers in an API route. If that is\n// the case Next.js wil crash during runtime but the Sentry SDK should definitely not crash so we need tohandle it.\nlet userProvidedHandler = undefined;\n\nif ('default' in userApiModule && typeof userApiModule.default === 'function') {\n  // Handle when user defines via ESM export: `export default myFunction;`\n  userProvidedHandler = userApiModule.default;\n} else if (typeof userApiModule === 'function') {\n  // Handle when user defines via CJS export: \"module.exports = myFunction;\"\n  userProvidedHandler = userApiModule;\n}\n\nconst origConfig = userApiModule.config || {};\n\n// Setting `externalResolver` to `true` prevents nextjs from throwing a warning in dev about API routes resolving\n// without sending a response. It's a false positive (a response is sent, but only after we flush our send queue), and\n// we throw a warning of our own to tell folks that, but it's better if we just don't have to deal with it in the first\n// place.\nconst config = {\n  ...origConfig,\n  api: {\n    ...origConfig.api,\n    externalResolver: true,\n  },\n};\n\nlet wrappedHandler = userProvidedHandler;\n\nif (wrappedHandler && undefined) {\n  wrappedHandler = Sentry.wrapApiHandlerWithSentryVercelCrons(wrappedHandler, undefined);\n}\n\nif (wrappedHandler) {\n  wrappedHandler = Sentry.wrapApiHandlerWithSentry(wrappedHandler, '/api/request');\n}\n\nconst wrappedHandler$1 = wrappedHandler;\n\nexport { config, wrappedHandler$1 as default };\n","/**\n * Hoists a name from a module or promised module.\n *\n * @param module the module to hoist the name from\n * @param name the name to hoist\n * @returns the value on the module (or promised module)\n */ \"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nObject.defineProperty(exports, \"hoist\", {\n    enumerable: true,\n    get: function() {\n        return hoist;\n    }\n});\nfunction hoist(module, name) {\n    // If the name is available in the module, return it.\n    if (name in module) {\n        return module[name];\n    }\n    // If a property called `then` exists, assume it's a promise and\n    // return a promise that resolves to the name.\n    if (\"then\" in module && typeof module.then === \"function\") {\n        return module.then((mod)=>hoist(mod, name));\n    }\n    // If we're trying to hoise the default export, and the module is a function,\n    // return the module itself.\n    if (typeof module === \"function\" && name === \"default\") {\n        return module;\n    }\n    // Otherwise, return undefined.\n    return undefined;\n}\n\n//# sourceMappingURL=helpers.js.map","import { PagesAPIRouteModule } from \"next/dist/server/future/route-modules/pages-api/module.compiled\";\nimport { RouteKind } from \"next/dist/server/future/route-kind\";\nimport { hoist } from \"next/dist/build/templates/helpers\";\n// Import the userland code.\nimport * as userland from \"private-next-pages/api/request.ts\";\n// Re-export the handler (should be the default export).\nexport default hoist(userland, \"default\");\n// Re-export config.\nexport const config = hoist(userland, \"config\");\n// Create and export the route module that will be consumed.\nexport const routeModule = new PagesAPIRouteModule({\n    definition: {\n        kind: RouteKind.PAGES_API,\n        page: \"/api/request\",\n        pathname: \"/api/request\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland\n});\n\n//# sourceMappingURL=pages-api.js.map","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"net\");","import { isIP } from 'net';\n\nconst urlSubstringBlacklist = [\n  '127.0.0.1',\n  '127.1',\n  '127.000.000.1',\n  'localhost',\n  '127.0.0.2',\n  '0x7f.0x0.0x0.0x1',\n  '0177.0.0.01',\n  '01111111000000000000000000000001',\n  '01111111.00000000.00000000.00000001',\n  '2130706433',\n  '017700000001',\n  '%6c%6f%63%61%6c%68%6f%73%74',\n  '0177.0.0.0x1',\n  '169.254.169.254',\n  '169.254.169.254/latest/meta-data/iam/security-credentials/',\n  '169.254.169.254/latest/meta-data/hostname',\n  'fuf.me',\n  'localtest.me',\n  'ulh.us',\n  '127-0-0-1.org.uk',\n  'ratchetlocal.com',\n  'smackaho.st',\n  '42foo.com',\n  'vcap.me',\n  'beweb.com',\n  'yoogle.com',\n  'ortkut.com',\n  'feacebook.com',\n  'lvh.me',\n  '127.127.127.127',\n  '127.0.0.0',\n  '1.1.1.1 &@2.2.2.2# @3.3.3.3',\n  'urllib: 3.3.3.3',\n  'amazonaws.com',\n  '[::]',\n  '0000',\n];\nconst urlExactBlacklist = ['0'];\n\nexport function isSafeRequestUrl(urlString: string) {\n  let url;\n  try {\n    url = new URL(urlString);\n  } catch {\n    return false;\n  }\n\n  const lowerHref = url.href.toLowerCase();\n\n  return (\n    url.protocol === 'https:' && // only allow https\n    !urlSubstringBlacklist.some((blacklisted) =>\n      url.hostname.toLowerCase().includes(blacklisted)\n    ) && // disallow any url containing a blacklisted substring\n    !urlExactBlacklist.includes(lowerHref) && // disallow any url that exactly matches a blacklisted string\n    isIP(url.hostname) === 0 // disallow any url that is a simple IP address\n  );\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nObject.defineProperty(exports, \"RouteKind\", {\n    enumerable: true,\n    get: function() {\n        return RouteKind;\n    }\n});\nvar RouteKind;\n(function(RouteKind) {\n    /**\n   * `PAGES` represents all the React pages that are under `pages/`.\n   */ RouteKind[\"PAGES\"] = \"PAGES\";\n    /**\n   * `PAGES_API` represents all the API routes under `pages/api/`.\n   */ RouteKind[\"PAGES_API\"] = \"PAGES_API\";\n    /**\n   * `APP_PAGE` represents all the React pages that are under `app/` with the\n   * filename of `page.{j,t}s{,x}`.\n   */ RouteKind[\"APP_PAGE\"] = \"APP_PAGE\";\n    /**\n   * `APP_ROUTE` represents all the API routes and metadata routes that are under `app/` with the\n   * filename of `route.{j,t}s{,x}`.\n   */ RouteKind[\"APP_ROUTE\"] = \"APP_ROUTE\";\n})(RouteKind || (RouteKind = {}));\n\n//# sourceMappingURL=route-kind.js.map","\"use strict\";\nif (process.env.NEXT_RUNTIME === \"edge\") {\n    module.exports = require(\"next/dist/server/future/route-modules/pages-api/module.js\");\n} else {\n    if (process.env.NODE_ENV === \"development\") {\n        module.exports = require(\"next/dist/compiled/next-server/pages-api.runtime.dev.js\");\n    } else if (process.env.TURBOPACK) {\n        module.exports = require(\"next/dist/compiled/next-server/pages-api-turbo.runtime.prod.js\");\n    } else {\n        module.exports = require(\"next/dist/compiled/next-server/pages-api.runtime.prod.js\");\n    }\n}\n\n//# sourceMappingURL=module.compiled.js.map"],"names":["module","exports","require","userProvidedHandler","handler","req","res","method","url","header","query","body","cookie","_cookie","isSafeRequestUrl","send","error","errorMessage","data","toFormData","response","axios","params","headers","paramsSerializer","indexes","responseEncoding","validateStatus","transformResponse","status","statusText","console","isAxiosError","request","form","FormData","undefined","TypeError","Object","entries","filter","_","value","forEach","key","append","serverComponentModule","userApiModule","default","origConfig","config","api","externalResolver","wrappedHandler","_sentry_nextjs__WEBPACK_IMPORTED_MODULE_0__","wrapApiHandlerWithSentry","wrappedHandler$1","defineProperty","enumerable","get","hoist","name","then","mod","__WEBPACK_DEFAULT_EXPORT__","next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__","l","private_next_pages_api_request_ts__WEBPACK_IMPORTED_MODULE_3__","routeModule","next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__","PagesAPIRouteModule","definition","kind","next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__","x","PAGES_API","page","pathname","bundlePath","filename","userland","external_net_namespaceObject","urlSubstringBlacklist","urlExactBlacklist","urlString","URL","lowerHref","href","toLowerCase","protocol","some","hostname","includes","blacklisted","isIP","RouteKind","__webpack_require__"],"sourceRoot":""}